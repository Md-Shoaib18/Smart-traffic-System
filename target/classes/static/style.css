body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #2c3e50;
    color: white;
    text-align: center;
    margin: 0;
    padding: 20px;
}

/* --- Control Panel --- */
.controls { margin-bottom: 20px; }
.btn {
    padding: 10px 15px; margin: 0 5px; cursor: pointer;
    border: none; border-radius: 5px; font-weight: bold; color: #fff;
    transition: transform 0.1s;
}
.btn:active { transform: scale(0.95); }
.btn.north { background: #3498db; }
.btn.south { background: #9b59b6; }
.btn.east { background: #e67e22; }
.btn.west { background: #1abc9c; }

/* --- Intersection Map --- */
#intersection {
    position: relative;
    width: 600px; height: 600px;
    background: #95a5a6; /* The concrete */
    border: 5px solid #7f8c8d;
    margin: 0 auto;
    overflow: hidden; /* Hides cars entering from off-screen */
    border-radius: 10px;
}

/* --- Roads (The dark asphalt) --- */
.road { position: absolute; background: #34495e; }
.road.vertical { width: 100px; height: 100%; left: 250px; }
.road.horizontal { height: 100px; width: 100%; top: 250px; }

/* --- Lights & Timers --- */
.light-group {
    position: absolute; z-index: 10;
    display: flex; flex-direction: column; align-items: center;
}
.traffic-light {
    width: 20px; height: 20px; border-radius: 50%;
    background: #444; border: 2px solid #222;
    box-shadow: 0 0 5px rgba(0,0,0,0.5);
}
.timer {
    font-size: 14px; font-weight: bold; background: #000;
    padding: 2px 5px; border-radius: 3px; margin-bottom: 3px;
    font-family: monospace; border: 1px solid #555;
}

/* Light Positioning (Placed at the stop lines) */
.north-light-group { top: 190px; left: 220px; }   /* For cars coming from Top */
.south-light-group { bottom: 190px; right: 220px; } /* For cars coming from Bottom */
.east-light-group  { top: 220px; right: 190px; }  /* For cars coming from Right */
.west-light-group  { bottom: 220px; left: 190px; } /* For cars coming from Left */

/* --- Vehicle Lanes (The Flow Logic) --- */
/* LOGIC: 
   Flex-direction ensures 'appendChild' adds to the BACK of the line.
   'First Child' is always the car closest to the intersection.
*/

.lane {
    position: absolute;
    display: flex;
    gap: 8px; /* Space between cars */
    padding: 2px;
}

/* North Lane: Cars move DOWN. Queue starts at bottom (250px), grows UP. */
.lane.north-lane {
    left: 260px; bottom: 350px; /* Start at intersection edge */
    width: 30px; height: 250px; /* Extends Upwards */
    flex-direction: column-reverse; /* First child at bottom, New child at top */
    align-items: center;
}

/* South Lane: Cars move UP. Queue starts at top (350px), grows DOWN. */
.lane.south-lane {
    left: 310px; top: 350px; /* Start at intersection edge */
    width: 30px; height: 250px; /* Extends Downwards */
    flex-direction: column; /* First child at top, New child at bottom */
    align-items: center;
}

/* East Lane: Cars move LEFT. Queue starts at left (350px), grows RIGHT. */
.lane.east-lane {
    top: 260px; left: 350px; /* Start at intersection edge */
    height: 30px; width: 250px; /* Extends Rightwards */
    flex-direction: row; /* First child at left, New child at right */
    justify-content: flex-start;
}

/* West Lane: Cars move RIGHT. Queue starts at right (250px), grows LEFT. */
.lane.west-lane {
    top: 310px; right: 350px; /* Start at intersection edge */
    height: 30px; width: 250px; /* Extends Leftwards */
    flex-direction: row-reverse; /* First child at right, New child at left */
    justify-content: flex-start;
}

/* --- The Vehicle --- */
.vehicle {
    width: 20px; height: 20px;
    background-color: #f1c40f; /* Yellow Cab */
    border: 1px solid #e67e22;
    border-radius: 4px;
    box-shadow: 1px 1px 3px rgba(0,0,0,0.5);
    flex-shrink: 0; /* Don't squish cars */
    transition: all 0.3s ease; /* Smooth movement when Queue updates */
}